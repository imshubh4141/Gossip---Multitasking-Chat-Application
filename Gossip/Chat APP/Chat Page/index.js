const items = [
    'a','about','act','actually','add','after','again','against','age','ago','air','all','also','always','am','among','an','and','animal','another','answer','appear','are','area','as','ask','at','back','ball','base','be','beauty','because','become','bed','been','before','began','begin','behind','best','better','between','big','bird','black','blue','boat','body','book','both','bottom','box','boy','bring','brought','build','built','busy','but','by','call','came','can','car','care','carefully','carry','centre','certain','change','check','child','children','city','class','clear','close','cold','colour','come','common','community','complete','contain','could','country','course','create','cried','cross','cry','cut','dark','day','deap','decide','decided','deep','develop','did','didn’t','different','do','does','dog','don’t','door','down','draw','dream','drive','dry','during','each','early','earth','east','easy','eat','eating','effort','enough','every','example','experience','explain','eye','face','fact','false','family','far','farm','fast','father','feel','feet','few','field','find','fire','first','fish','fishy','five','fly','follow','food','foody','form','found','four','friend','from','front','full','game','gave','get','girl','give','go','gold','good','got','government','great','green','ground','group','grow','guy','had','half','hand','happen','happened','hard','has','have','he','hear','heat','heavy','help','her','here','high','his','hold','home','horse','hot','hour','house','hundred','I','ice','idea','if','important','in','inch','include','into','is','island','it','juice','just','justice','keen','keep','kind','king','knew','know','known','land','language','large','last','late','later','laugh','lead','learn','leave','left','less','less','let','letter','life','light','like','line','list','listen','little','live','long','look','love','low','machine','made','make','man','many','map','mark','may','mean','measure','men','might','mile','million','mind','minute','miss','money','month','moon','more','more','morning','most','mother','mountain','move','much','music','must','my','name','nation','near','need','never','new','next','night','no','north','note','notice','noun','now','number','object','of','off','office','often','oh','oil','old','on','once','one','only','open','or','order','other','our','out','over','page','pair','part','pass','passed','people','perhaps','person','picture','place','plan','plane','plant','play','point','power','probably','problem','product','provide','pull','put','question','quick','rain','ran','reach','read','ready','real','receive','record','red','relationship','remember','right','river','road','rock','room','round','rule','run','said','same','saw','say','school','science','sea','season','second','see','seem','self','sentence','serve','set','several','shape','she','ship','short','should','show','shown','side','simple','since','sing','sit','six','size','sleep','slow','small','snow','so','some','something','song','soon','sound','south','space','special','spell','spring','stand','star','start','stay','step','stood','stop','story','street','strong','study','such','summer','sun','system','table','take','talk','teach','tell','ten','test','than','that','the','their','them','then','there','these','they','thing','think','this','those','though','thought','thousand','three','through','time','to','together','told','too','took','top','toward','town','travel','tree','try','true','turn','two','under','understand','until','up','upon','us','use','usual','very','voice','vowel','wait','walk','want','war','warm','was','watch','water','wave','way','we','week','weight','were','west','what','wheel','where','which','white','who','why','will','wind','winter','with','without','woman','wonder','wood','word','words','work','world','would','write','wrong','year','yes','you','young','friday','monday','saturday','sunday','thursday','tuesday','wednesday','january','february','march','april','may','june','july','august','september','october','november','december','alfalfa','sprouts','apple','apricot','artichoke','asian','pear','asparagus','atemoya','avocado','bamboo','shoots','banana','bean','sprouts','beans','beets','belgian','endive','bell','peppers','bitter','melon','blackberries','blueberries','bok','choy','boniato','boysenberries','broccoflower','broccoli','brussels','sprouts','cabbage','cactus','pear','cantaloupe','carambola','carrots','casaba','melon','cauliflower','celery','chayote','cherimoya','cherries','coconuts','collard','greens','corn','cranberries','cucumber','dates','dried','plums','eggplant','endive','escarole','feijoa','fennel','figs','garlic','gooseberries','grapefruit','grapes','green','beans','green','onions','greens','guava','hominy','honeydew','melon','horned','melon','iceberg','lettuce','jerusalem','artichoke','jicama','kale','kiwifruit','kohlrabi','kumquat','leeks','lemons','lettuce','lima','beans','limes','longan','loquat','lychee','madarins','malanga','mandarin','oranges','mangos','mulberries','mushrooms','napa','nectarines','okra','onion','oranges','papayas','parsnip','passion','fruit','peaches','pears','peas','peppers','persimmons','pineapple','plantains','plums','pomegranate','potatoes','prickly','pear','prunes','pummelo','pumpkin','quince','radicchio','radishes','raisins','raspberries','red','cabbage','rhubarb','romaine','lettuce','rutabaga','shallots','water','snow','peas','spinach','sprouts','squash','strawberries','tangelo','tangerines','tomatillo','tomato','turnip','watercress','watermelon','yams','yuca','cassava','zucchini','asparagus','apples','avocado','alfalfa','acorn','squash','almond','arugala','artichoke','applesauce','asian','noodles','antelope','ahi','tuna','albacore','tuna','apple','juice','avocado','roll','bruscetta','bacon','black','beans','bagels','baked','beans','bbq','bison','barley','beer','bisque','bluefish','bread','broccoli','buritto','babaganoosh','cabbage','cake','carrots','carne','asada','celery','cheese','chicken','catfish','chips','chocolate','chowder','clams','coffee','cookies','corn','cupcakes','crab','curry','cereal','chimichanga','dates','dips','duck','dumplings','donuts','eggs','enchilada','eggrolls','english','muffins','edamame','eel','sushi','fajita','falafel','fish','franks','fondu','french','toast','french','dip','garlic','ginger','gnocchi','goose','granola','grapes','green','beans','guancamole','gumbo','grits','graham','crackers','how','ham','halibut','hamburger','bacon','cheeseburgers','honey','huenos','rancheros','hash','browns','hot','dogs','haiku','roll','hummus','ice','cream','irish','stew','indian','food','italian','bread','jambalaya','jelly','jam','jerky','jalapeño','kale','kabobs','ketchup','kiwi','kidney','beans','kingfish','lobster','lamb','linguine','lasagna','meatballs','moose','milk','milkshake','noodles','ostrich','pizza','pepperoni','porter','pancakes','quesadilla','quiche','reuben','spinach','spaghetti','tater','tots','toast','venison','waffles','wine','walnuts','yogurt','ziti','afghanistan','albania','algeria','andorra','angola','antigua','and','barbuda','argentina','armenia','australia','austria','austrian','empire','azerbaijan','baden','bahamas','bahrain','bangladesh','barbados','bavaria','belarus','belgium','belize','benin','dahomey','bolivia','bosnia','and','herzegovina','botswana','brazil','brunei','brunswick','and','lüneburg','bulgaria','burkina','faso','upper','volta','burma','burundi','cabo','verde','cambodia','cameroon','canada','cayman','islands','central','african','republic','central','american','federation','chad','chile','china','colombia','comoros','congo','free','state','costa','rica','cote','d’ivoire','ivory','coast','croatia','cuba','cyprus','czechia','czechoslovakia','democratic','republic','of','the','congo','denmark','djibouti','dominica','dominican','republic','duchy','of','parma','east','germany','german','democratic','republic','ecuador','egypt','el','salvador','equatorial','guinea','eritrea','estonia','eswatini','ethiopia','federal','government','of','germany','fiji','finland','france','gabon','gambia,','the','georgia','germany','ghana','grand','duchy','of','tuscany','greece','grenada','guatemala','guinea','guinea-bissau','guyana','haiti','hanover','hanseatic','republics','hawaii','hesse','holy','see','honduras','hungary','iceland','india','indonesia','iran','iraq','ireland','israel','italy','jamaica','japan','jordan','kazakhstan','kenya','kingdom','of','serbia','yugoslavia','kiribati','korea','kosovo','kuwait','kyrgyzstan','l','laos','latvia','lebanon','lesotho','lew','chew','liberia','libya','liechtenstein','lithuania','luxembourg','madagascar','malawi','malaysia','maldives','mali','malta','marshall','islands','mauritania','mauritius','mecklenburg-schwerin','mecklenburg-strelitz','mexico','micronesia','moldova','monaco','mongolia','montenegro','morocco','mozambique','namibia','nassau','nauru','nepal','netherlands','new','zealand','nicaragua','niger','nigeria','north','german','confederation','north','german','union','north','macedonia','norway','oldenburg','oman','orange','free','state','pakistan','palau','panama','papal','states','papua','new','guinea','paraguay','peru','philippines','piedmont','sardinia','poland','portugal','qatar','republic','of','genoa','republic','of','korea','republic','of','the','congo','romania','russia','rwanda','saint','kitts','and','nevis','saint','lucia','saint','vincent','and','the','grenadines','samoa','san','marino','sao','tome','and','principe','saudi','arabia','schaumburglippe','senegal','serbia','seychelles','sierra','leone','singapore','slovakia','slovenia','solomon','islands','somalia','south','africa','south','sudan','spain','sri','lanka','sudan','suriname','sweden','switzerland','syria','','tajikistan','tanzania','texas','thailand','timorleste','togo','tonga','trinidad','and','tobago','tunisia','turkey','turkmenistan','tuvalu','two','sicilies','uganda','ukraine','union','of','soviet','socialist','republics','united','arab','emirates','the','united','kingdom','the','uruguay','uzbekistan','vanuatu','venezuela','vietnam','württemberg','yemen','zambia','zimbabwe','square','triangle','oval','circle','round','elliptical','pointed','europe','atlantic','ocean','russia','spices','spicy','rude','polite','angry','kind','enthusiastic','movie','music','romance','drama','theatre','art','science','commerce','humanities','maths','thriller','horror','suspense','cast','actor','hot','cold','bad','good','big','small','old','trending','clothes','random','code','engineer','dust','robot','gossip','chatting'
];

const trie = new AutoComplete();
for(const item of items)
    trie.add(item);

const text_box = document.getElementById("msgInp");
const list = document.getElementById("list");

function handler(e) {
    list.innerHTML = "";
    let str = e.target.value;
    if(str.lastIndexOf(' ') !== -1){
        str = str.substring(str.lastIndexOf(' ') + 1);
        // console.log(str.lastIndexOf(' '));
    }
    
    if(str !== ''){
        const suggestions = trie.suggest(str);
        
        console.log(suggestions);
    
        for (let i = 0;i < 15 && i < suggestions.length;i++){
            let li = document.createElement('li');
            let word = document.createTextNode(str + suggestions[i].substring(str.length));
            li.appendChild(word);
            list.appendChild(li);
            li.addEventListener('click',()=>{
                let msg = text_box.value;
                msg = msg.substring(0,msg.lastIndexOf(' '));
                text_box.value = msg + ' ' + li.innerText;
                list.innerHTML = "";
                text_box.focus();
            })
        }

        if(text_box.value === "")
            list.innerHTML = "";
    }
}

// function handleClick(e) {// will have to change this
//     text_box.value = e.innerText;
//     list.innerHTML = "";
//     // text_box.value = text_box.value + e.innerText;
// }

// handler({ target: { value: "" } });


text_box.addEventListener("keyup", handler);